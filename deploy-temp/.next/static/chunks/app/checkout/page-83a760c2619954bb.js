(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{5066:function(e,t,r){Promise.resolve().then(r.bind(r,523))},1671:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8226:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6337:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},523:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(7437),n=r(2265),a=r(9376),i=r(7648);let c=(0,r(9205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var l=r(6337),o=r(8226),d=r(1671),u=r(5384),m=r(7818);function h(){let e=(0,a.useRouter)(),[t,h]=(0,n.useState)([]),[x,p]=(0,n.useState)(!1),[f,y]=(0,n.useState)({customerName:"",customerEmail:"",customerPhone:"",shippingAddress:"",paymentMethod:"cash_on_delivery",notes:""});(0,n.useEffect)(()=>{if(h((0,m.dv)()),(0,u.DW)()){let e=(0,u.jy)();e&&y(t=>({...t,customerName:"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),customerEmail:e.email,customerPhone:e.phone||""}))}},[]);let g=t.reduce((e,t)=>e+t.price*t.quantity,0),j=g>100?0:15,N=g+j,b=async s=>{s.preventDefault(),p(!0);try{let s={customerName:f.customerName,customerEmail:f.customerEmail,customerPhone:f.customerPhone,shippingAddress:f.shippingAddress,paymentMethod:f.paymentMethod,notes:f.notes,items:t.map(e=>({productId:e.id,productName:e.name,price:e.price,quantity:e.quantity})),totalAmount:N},n=(0,u.Pc)(),a={"Content-Type":"application/json"};n&&(a.Authorization="Bearer ".concat(n));let i=await fetch("/api/orders",{method:"POST",headers:a,body:JSON.stringify(s)}),c=await i.json();if(i.ok){let{clearCart:t}=await Promise.resolve().then(r.bind(r,7818));t(),e.push("/checkout/success?order=".concat(c.orderNumber))}else alert("Error placing order: "+(c.error||"Unknown error")),p(!1)}catch(e){alert("Error: "+e),p(!1)}};return 0===t.length?(0,s.jsx)("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-12 text-center max-w-md mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Add items to your cart to checkout"}),(0,s.jsx)(i.default,{href:"/products",className:"inline-block bg-primary-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700",children:"Browse Products"})]})})}):(0,s.jsx)("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)(i.default,{href:"/cart",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[(0,s.jsx)(c,{className:"w-4 h-4"}),"Back to Cart"]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Secure Checkout"})]}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:f.customerName,onChange:e=>y({...f,customerName:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),(0,s.jsx)("input",{type:"email",required:!0,value:f.customerEmail,onChange:e=>y({...f,customerEmail:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",required:!0,value:f.customerPhone,onChange:e=>y({...f,customerPhone:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"+971 XX XXX XXXX"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Shipping Address"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Complete Address *"}),(0,s.jsx)("textarea",{required:!0,value:f.shippingAddress,onChange:e=>y({...f,shippingAddress:e.target.value}),rows:4,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Street address, Building, Apartment, City, Country"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payment Method"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"paymentMethod",value:"cash_on_delivery",checked:"cash_on_delivery"===f.paymentMethod,onChange:e=>y({...f,paymentMethod:e.target.value}),className:"w-4 h-4"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:"Cash on Delivery"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Pay when you receive your order"})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50 opacity-50",children:[(0,s.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",disabled:!0,className:"w-4 h-4"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:["Credit/Debit Card",(0,s.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Coming Soon"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Secure online payment"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Order Notes (Optional)"}),(0,s.jsx)("textarea",{value:f.notes,onChange:e=>y({...f,notes:e.target.value}),rows:3,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Special instructions for delivery..."})]}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-primary-600 text-white py-3 rounded-lg font-semibold hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?"Processing...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),"Place Order"]})})]})]})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 sticky top-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-3 mb-4",children:t.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Qty: ",e.quantity]})]}),(0,s.jsxs)("p",{className:"font-semibold",children:["AED ",(e.price*e.quantity).toFixed(2)]})]},e.id))}),(0,s.jsxs)("div",{className:"border-t pt-4 space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{children:["AED ",g.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,s.jsx)("span",{children:"Shipping"}),(0,s.jsx)("span",{children:0===j?"Free":"AED ".concat(j.toFixed(2))})]}),g<100&&(0,s.jsxs)("p",{className:"text-sm text-accent-600",children:["Add AED ",(100-g).toFixed(2)," more for free shipping"]}),(0,s.jsxs)("div",{className:"border-t pt-2 flex justify-between font-bold text-lg",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{className:"text-primary-600",children:["AED ",N.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{children:"Secure checkout"})]})]})})]})]})})}},5384:function(e,t,r){"use strict";function s(){return localStorage.getItem("customer_token")}function n(e){localStorage.setItem("customer_token",e)}function a(){localStorage.removeItem("customer_token")}function i(){let e=localStorage.getItem("customer_user");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function c(e){localStorage.setItem("customer_user",JSON.stringify(e))}function l(){localStorage.removeItem("customer_user")}function o(){return null!==s()}r.d(t,{DW:function(){return o},PX:function(){return l},Pc:function(){return s},Xg:function(){return c},jy:function(){return i},nT:function(){return n},v4:function(){return a}})},7818:function(e,t,r){"use strict";r.d(t,{I3:function(){return d},Xq:function(){return i},a3:function(){return l},clearCart:function(){return o},dv:function(){return n},h2:function(){return c},zt:function(){return u}});let s="amer_shop_cart";function n(){try{let e=localStorage.getItem(s);return e?JSON.parse(e):[]}catch(e){return[]}}function a(e){try{localStorage.setItem(s,JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated"))}catch(e){console.error("Error saving cart:",e)}}function i(e){let t=n(),r=t.find(t=>t.id===e.id);r?r.quantity+=e.quantity||1:t.push({...e,quantity:e.quantity||1}),a(t)}function c(e){a(n().filter(t=>t.id!==e))}function l(e,t){if(t<=0){c(e);return}let r=n(),s=r.find(t=>t.id===e);s&&(s.quantity=t,a(r))}function o(){a([])}function d(){return n().reduce((e,t)=>e+t.price*t.quantity,0)}function u(){return n().reduce((e,t)=>e+t.quantity,0)}}},function(e){e.O(0,[216,971,117,744],function(){return e(e.s=5066)}),_N_E=e.O()}]);