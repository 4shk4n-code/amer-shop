(()=>{var e={};e.id=351,e.ids=[351,562],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},50601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(35607),s(18702),s(35866);var a=s(23191),r=s(88716),i=s(37922),l=s.n(i),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["products",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,35607)),"E:\\amertrading.shop\\src\\app\\products\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,18702)),"E:\\amertrading.shop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\amertrading.shop\\src\\app\\products\\[id]\\page.tsx"],m="/products/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/products/[id]/page",pathname:"/products/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},28701:(e,t,s)=>{Promise.resolve().then(s.bind(s,25758))},40617:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},11019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},33734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},25758:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(10326),r=s(17577),i=s(33734),l=s(11019),n=s(83855),c=s(57671),d=s(67427),o=s(40617);let m=(0,s(62881).Z)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var x=s(90434),h=s(35047),u=s(12562),p=s(7705),g=s(84176);function y(){let e=(0,h.useParams)(),[t,s]=(0,r.useState)(1),[y,b]=(0,r.useState)(0),[j,v]=(0,r.useState)(null),[f,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(!1),{toggleFavorite:P,isFavorite:S}=(0,p.r)(),[C,q]=(0,r.useState)([]),[Z,E]=(0,r.useState)(!1),[$,_]=(0,r.useState)({rating:5,title:"",comment:""}),[M,A]=(0,r.useState)(!1),D=async()=>{try{N(!0);let t=await fetch(`/api/products/${e.id}`);if(t.ok){let e=await t.json();v(e)}else console.error("Product not found")}catch(e){console.error("Error fetching product:",e)}finally{N(!1)}},O=async()=>{try{let t=await fetch(`/api/products/${e.id}/reviews`);if(t.ok){let e=await t.json();q(e.reviews||[])}}catch(e){console.error("Error fetching reviews:",e)}},R=async t=>{if(t.preventDefault(),!(0,g.DW)()){alert("Please login to submit a review");return}A(!0);try{let t=(0,g.Pc)(),s=await fetch(`/api/products/${e.id}/reviews`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify($)}),a=await s.json();s.ok?(E(!1),_({rating:5,title:"",comment:""}),O(),j&&D(),alert("Review submitted successfully!")):alert("Error: "+(a.error||"Failed to submit review"))}catch(e){alert("Error submitting review")}finally{A(!1)}};if(f)return a.jsx("div",{className:"bg-gray-50 min-h-screen py-8",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"text-gray-500",children:"Loading product..."})})})});if(!j)return a.jsx("div",{className:"bg-gray-50 min-h-screen py-8",children:a.jsx("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-500",children:"Product not found"}),a.jsx(x.default,{href:"/products",className:"text-primary-600 hover:underline mt-4 inline-block",children:"Back to Products"})]})})});let F=j.originalPrice?Math.round((j.originalPrice-j.price)/j.originalPrice*100):0;return a.jsx("div",{className:"bg-gray-50 min-h-screen py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("nav",{className:"text-sm text-gray-600 mb-6",children:[a.jsx(x.default,{href:"/",className:"hover:text-primary-600",children:"Home"})," / ",a.jsx(x.default,{href:`/categories/${j.category.slug}`,className:"hover:text-primary-600",children:j.category.name})," / ",a.jsx("span",{className:"text-gray-900",children:j.name})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg mb-4 flex items-center justify-center overflow-hidden",children:j.images&&j.images.length>0?a.jsx("img",{src:j.images[y],alt:j.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500",children:"No Image"})})}),j.images&&j.images.length>1&&a.jsx("div",{className:"flex gap-2",children:j.images.map((e,t)=>a.jsx("div",{onClick:()=>b(t),className:`w-20 h-20 bg-gray-100 rounded border-2 cursor-pointer hover:border-primary-500 overflow-hidden ${y===t?"border-primary-500":"border-gray-200"}`,children:a.jsx("img",{src:e,alt:`${j.name} ${t+1}`,className:"w-full h-full object-cover"})},t))})]}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-4",children:j.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>a.jsx(i.Z,{className:`w-5 h-5 ${t<Math.floor(j.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},t))}),(0,a.jsxs)("span",{className:"text-gray-600",children:["(",j.reviewCount," reviews)"]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,a.jsxs)("span",{className:"text-4xl font-bold text-gray-900",children:["AED ",j.price.toFixed(2)]}),j.originalPrice&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-2xl text-gray-500 line-through",children:["AED ",j.originalPrice.toFixed(2)]}),(0,a.jsxs)("span",{className:"bg-accent-500 text-white px-3 py-1 rounded font-semibold",children:["-",F,"%"]})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:j.inStock?`In Stock (${j.stockQuantity} available)`:"Out of Stock"})]}),a.jsx("p",{className:"text-gray-700 mb-6",children:j.description}),j.specifications&&Object.keys(j.specifications).length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Specifications"}),a.jsx("div",{className:"space-y-2",children:Object.entries(j.specifications).map(([e,t])=>(0,a.jsxs)("div",{className:"flex justify-between border-b border-gray-200 pb-2",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:[e,":"]}),a.jsx("span",{className:"font-medium",children:t})]},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[a.jsx("button",{onClick:()=>s(Math.max(1,t-1)),className:"p-2 hover:bg-gray-100",disabled:!j.inStock,children:a.jsx(l.Z,{className:"w-4 h-4"})}),a.jsx("span",{className:"px-4 py-2 min-w-[60px] text-center",children:t}),a.jsx("button",{onClick:()=>s(Math.min(j.stockQuantity,t+1)),className:"p-2 hover:bg-gray-100",disabled:!j.inStock||t>=j.stockQuantity,children:a.jsx(n.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("button",{onClick:()=>{j&&j.inStock&&((0,u.Xq)({id:j.id,name:j.name,price:j.price,originalPrice:j.originalPrice||void 0,quantity:t,image:j.images&&j.images.length>0?j.images[0]:""}),k(!0),setTimeout(()=>k(!1),2e3))},disabled:!j.inStock,className:`flex-1 px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-colors ${j.inStock?w?"bg-green-600 text-white":"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[a.jsx(c.Z,{className:"w-5 h-5"}),w?"Added to Cart!":j.inStock?"Add to Cart":"Out of Stock"]}),a.jsx("button",{onClick:()=>{j&&P({id:j.id,name:j.name,price:j.price,originalPrice:j.originalPrice||void 0,image:j.images&&j.images.length>0?j.images[0]:"",rating:j.rating,reviews:j.reviewCount,category:j.category.name})},className:`p-3 border-2 rounded-lg transition-colors ${j&&S(j.id)?"border-red-500 bg-red-50":"border-gray-300 hover:border-primary-500"}`,children:a.jsx(d.Z,{className:`w-5 h-5 ${j&&S(j.id)?"fill-red-500 text-red-500":"text-gray-600"}`})})]}),a.jsx("div",{className:"border-t border-gray-200 pt-6",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsx("p",{children:"✓ Free delivery on orders over AED 100"}),a.jsx("p",{children:"✓ 7-day return policy"}),a.jsx("p",{children:"✓ Secure payment"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-6 h-6"}),"Reviews (",C.length,")"]}),(0,g.DW)()&&!Z&&a.jsx("button",{onClick:()=>E(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:"Write a Review"})]}),Z&&(0,a.jsxs)("form",{onSubmit:R,className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Write a Review"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating *"}),a.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>a.jsx("button",{type:"button",onClick:()=>_({...$,rating:e}),className:"focus:outline-none",children:a.jsx(i.Z,{className:`w-6 h-6 ${e<=$.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),a.jsx("input",{type:"text",value:$.title,onChange:e=>_({...$,title:e.target.value}),className:"w-full px-4 py-2 border rounded-lg",placeholder:"Summary of your review"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comment"}),a.jsx("textarea",{value:$.comment,onChange:e=>_({...$,comment:e.target.value}),rows:4,className:"w-full px-4 py-2 border rounded-lg",placeholder:"Share your experience..."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",disabled:M,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 disabled:opacity-50",children:M?"Submitting...":"Submit Review"}),a.jsx("button",{type:"button",onClick:()=>{E(!1),_({rating:5,title:"",comment:""})},className:"px-6 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"})]})]})]}),0===C.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(o.Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"No reviews yet. Be the first to review this product!"})]}):a.jsx("div",{className:"space-y-6",children:C.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:e.author.name}),e.isVerifiedPurchase&&a.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Verified Purchase"})]}),a.jsx("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((t,s)=>a.jsx(i.Z,{className:`w-4 h-4 ${s<e.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},s))})]}),e.title&&a.jsx("h4",{className:"font-medium mb-2",children:e.title}),a.jsx("p",{className:"text-gray-700 mb-2",children:e.comment}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsxs)("button",{className:"flex items-center gap-1 hover:text-primary-600",children:[a.jsx(m,{className:"w-4 h-4"}),"Helpful (",e.helpfulCount,")"]})]})]},e.id))})]})]})]})})}},12562:(e,t,s)=>{"use strict";function a(){return[]}function r(e){let t=[],s=t.find(t=>t.id===e.id);s?s.quantity+=e.quantity||1:t.push({...e,quantity:e.quantity||1})}function i(e){[].filter(t=>t.id!==e)}function l(e,t){if(t<=0){i(e);return}let s=[].find(t=>t.id===e);s&&(s.quantity=t)}function n(){}function c(){return[].reduce((e,t)=>e+t.price*t.quantity,0)}s.d(t,{I3:()=>c,Xq:()=>r,a3:()=>l,clearCart:()=>n,dv:()=>a,h2:()=>i})},35607:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`E:\amertrading.shop\src\app\products\[id]\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,302,974],()=>s(50601));module.exports=a})();